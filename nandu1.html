<style>
  .bookanimationindex-carousel-wrapper {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }

  .bookanimationindex-carousel {
    display: flex;
    width: 400vw; /* 4 books */
    transition: transform 1s ease-in-out;
    height: 100%;
  }

  .bookanimationindex-book-container {
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #000;
  }

  .bookanimationindex-book {
    width: 600px;
    height: 400px;
    perspective: 2000px;
    position: relative;
  }

  .bookanimationindex-spread {
    width: 100%;
    height: 100%;
    position: absolute;
    display: flex;
    transform-style: preserve-3d;
    transform-origin: left;
    transition: transform 1s ease-in-out;
  }

  .bookanimationindex-page-left, .bookanimationindex-page-right {
    width: 50%;
    height: 100%;
    box-sizing: border-box;
    backface-visibility: hidden;
  }

  .bookanimationindex-page-left {
    background: #fffbe6;
    padding: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    color: #333;
  }

  .bookanimationindex-page-right {
    background: #fff;
  }

  .bookanimationindex-page-right img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .bookanimationindex-flip1 { transform: rotateY(-180deg); z-index: 3; }
  .bookanimationindex-flip2 { transform: rotateY(-180deg); z-index: 2; }
  .bookanimationindex-flip3 { transform: rotateY(-180deg); z-index: 1; }

  .bookanimationindex-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.6);
    color: #fff;
    font-size: 30px;
    padding: 10px 15px;
    cursor: pointer;
    z-index: 10;
    user-select: none;
  }

  .bookanimationindex-arrow.left { left: 10px; }
  .bookanimationindex-arrow.right { right: 10px; }

  .bookanimationindex-nav-buttons {
    position: absolute;
    bottom: 30px;
    display: flex;
    justify-content: center;
    width: 100%;
    gap: 20px;
  }

  .bookanimationindex-nav-buttons button {
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
    background: #444;
    color: #fff;
    border: none;
    border-radius: 8px;
    transition: background 0.3s ease;
  }

  .bookanimationindex-nav-buttons button:hover {
    background: #000;
  }
</style>

<div class="bookanimationindex-carousel-wrapper">
  <div class="bookanimationindex-arrow left" onclick="prevBook()">‹</div>
  <div class="bookanimationindex-arrow right" onclick="nextBook()">›</div>

  <div class="bookanimationindex-carousel" id="carousel">

    <!-- Book 1 -->
    <div class="bookanimationindex-book-container">
      <div class="bookanimationindex-book">
        <div class="bookanimationindex-spread" id="b1s1">
          <div class="bookanimationindex-page-left">Book 1 - Page 1</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/5.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b1s2">
          <div class="bookanimationindex-page-left">Book 1 - Page 2</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/2.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b1s3">
          <div class="bookanimationindex-page-left">Book 1 - Page 3</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/3.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b1s4">
          <div class="bookanimationindex-page-left">Book 1 - Page 4</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/4.png" /></div>
        </div>
      </div>
    </div>

    <!-- Book 2 -->
    <div class="bookanimationindex-book-container">
      <div class="bookanimationindex-book">
        <div class="bookanimationindex-spread" id="b2s1">
          <div class="bookanimationindex-page-left">Book 2 - Page 1</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/5.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b2s2">
          <div class="bookanimationindex-page-left">Book 2 - Page 2</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/6.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b2s3">
          <div class="bookanimationindex-page-left">Book 2 - Page 3</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/7.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b2s4">
          <div class="bookanimationindex-page-left">Book 2 - Page 4</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/8.png" /></div>
        </div>
      </div>
    </div>

    <!-- Book 3 -->
    <div class="bookanimationindex-book-container">
      <div class="bookanimationindex-book">
        <div class="bookanimationindex-spread" id="b3s1">
          <div class="bookanimationindex-page-left">Book 3 - Page 1</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/9.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b3s2">
          <div class="bookanimationindex-page-left">Book 3 - Page 2</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/10.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b3s3">
          <div class="bookanimationindex-page-left">Book 3 - Page 3</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/11.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b3s4">
          <div class="bookanimationindex-page-left">Book 3 - Page 4</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/2.png" /></div>
        </div>
      </div>
    </div>

    <!-- Book 4 -->
    <div class="bookanimationindex-book-container">
      <div class="bookanimationindex-book">
        <div class="bookanimationindex-spread" id="b4s1">
          <div class="bookanimationindex-page-left">Book 4 - Page 1</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/5.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b4s2">
          <div class="bookanimationindex-page-left">Book 4 - Page 2</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/6.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b4s3">
          <div class="bookanimationindex-page-left">Book 4 - Page 3</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/7.png" /></div>
        </div>
        <div class="bookanimationindex-spread" id="b4s4">
          <div class="bookanimationindex-page-left">Book 4 - Page 4</div>
          <div class="bookanimationindex-page-right"><img src="assets/images/brands/8.png" /></div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
  let currentIndex = 0;
  const totalBooks = 4;
  let autoPlay = true;

  function flipBook(bookNum) {
    for (let i = 1; i <= 4; i++) {
      setTimeout(() => {
        document.getElementById(`b${bookNum}s${i}`).classList.add(`bookanimationindex-flip${i}`);
      }, i * 1000);
    }

    // After flipping, go to next (auto)
    if (autoPlay) {
      setTimeout(() => {
        nextBook(true);
      }, 5000);
    }
  }

  function updateCarousel() {
    const carousel = document.getElementById('carousel');
    carousel.style.transform = `translateX(-${currentIndex * 100}vw)`;
  }

  function resetFlips() {
    for (let b = 1; b <= totalBooks; b++) {
      for (let s = 1; s <= 4; s++) {
        const spread = document.getElementById(`b${b}s${s}`);
        if (spread) {
          spread.classList.remove('bookanimationindex-flip1', 'bookanimationindex-flip2', 'bookanimationindex-flip3', 'bookanimationindex-flip4');
        }
      }
    }
  }

  function nextBook(auto = false) {
    autoPlay = auto; // If called by autoplay, continue auto loop

    currentIndex++;
    updateCarousel();

    if (currentIndex === totalBooks) {
      setTimeout(() => {
        const carousel = document.getElementById('carousel');
        carousel.style.transition = 'none';
        currentIndex = 0;
        updateCarousel();

        setTimeout(() => {
          carousel.style.transition = 'transform 0.5s ease';
          resetFlips();
          flipBook(1);
        }, 50);
      }, 1000);
    } else {
      resetFlips();
      flipBook(currentIndex + 1);
    }
  }

  function prevBook() {
    autoPlay = false; // Stop auto on manual control

    if (currentIndex === 0) {
      // Go to the last real book before the clone
      currentIndex = totalBooks - 1;
    } else {
      currentIndex--;
    }

    updateCarousel();
    resetFlips();
    flipBook(currentIndex + 1);
  }

  window.onload = () => {
    const carousel = document.getElementById('carousel');
    carousel.style.transition = 'transform 0.5s ease';
    flipBook(1);
  };
</script>
